{
    "name": "Searching Agent",
    "description": "Try to answer a given question using data from the web with grounded data.",
    "config": {
        "max_steps": 35,
        "max_time": 600
    },
    "tasks": [
        {
            "id": "A",
            "name": "Web Search Query",
            "description": "Write a web search query to collect useful information for the given question",
            "prompt": "Write down a web search query to collect useful information to answer to given question. Be creative. Avoid asking previously asked questions: \n###Query: {input} \n\n ###Previous Questions: {history}",
            "inputs": [
                {
                    "name": "input",
                    "value": {
                        "type": "read",
                        "key": "input"
                    },
                    "required": true
                },
                {
                    "name": "history",
                    "value": {
                        "type": "read",
                        "key": "history"
                    },
                    "required": false
                }
            ],
            "operator": "generation",
            "outputs": [
                {
                    "type": "write",
                    "key": "web_search_query",
                    "value": "result"
                }
            ]
        },
        {
            "id": "B",
            "name": "Web Search",
            "description": "Search the web with the given query",
            "prompt": "{query}",
            "inputs": [
                {
                    "name": "query",
                    "value": {
                        "type": "read",
                        "key": "web_search_query"
                    },
                    "required": true
                }
            ],
            "operator": "function_calling",
            "outputs": [
                {
                    "type": "write",
                    "key": "web_search_result",
                    "value": "result"
                },
                {
                    "type": "push",
                    "key": "web_search_result",
                    "value": "result"
                }
            ]
        },
        {
            "id": "C",
            "name": "Candidate Website",
            "description": "Pick the most useful link from web search results for the given query",
            "prompt": "Pick the most relevant URL from {web_results} to {query}",
            "inputs": [
                {
                    "name": "web_results",
                    "value": {
                        "type": "read",
                        "key": "web_search_result"
                    },
                    "required": true
                },
                {
                    "name": "query",
                    "value": {
                        "type": "read",
                        "key": "query",
                        "required": true
                    },
                    "required": true
                }
            ],
            "operator": "generation",
            "outputs": [
                {
                    "type": "write",
                    "key": "search_url",
                    "value": "result"
                }
            ]
        },
        {
            "id": "D",
            "name": "Scrape Website",
            "description": "Scrape the selected website",
            "prompt": "scrape {search_url}",
            "inputs": [
                {
                    "name": "search_url",
                    "value": {
                        "type": "read",
                        "key": "search_url",
                        "required": true
                    },
                    "required": true
                }
            ],
            "operator": "function_calling",
            "outputs": [
                {
                    "type": "push",
                    "key": "content",
                    "value": "result"
                }
            ]
        },
        {
            "id": "E",
            "name": "Summarize Website",
            "description": "Summarize website content",
            "prompt": "summarize given website content concisely {content}",
            "inputs": [
                {
                    "name": "content",
                    "value": {
                        "type": "pop",
                        "key": "content",
                        "required": true
                    },
                    "required": true
                }
            ],
            "operator": "generation",
            "outputs": [
                {
                    "type": "push",
                    "key": "summaries",
                    "value": "result"
                }
            ]
        },
        {
            "id": "F",
            "name": "Evaluate Result",
            "description": "Evaluate if the result is satisfying",
            "prompt": "Evaluate the result if it answers the query. Write 'Yes' if valid, if not 'No'.Write nothing else but strictly 'Yes'|'No'. query:{query} result:{summary}",
            "inputs": [
                {
                    "name": "summary",
                    "value": {
                        "type": "peek",
                        "key": "summaries"
                    },
                    "required": true
                },
                {
                    "name": "query",
                    "value": {
                        "type": "read",
                        "key": "query"
                    },
                    "required": true
                }
            ],
            "operator": "generation",
            "outputs": [
                {
                    "type": "write",
                    "key": "final_result",
                    "value": "result"
                }
            ]
        },
        {
            "id": "G",
            "name": "Check Result",
            "description": "Check if the result is satisfying",
            "prompt": "",
            "inputs": [
                {"name": "output", "value":{
                    "type": "read",
                    "key": "final_result"
                }, "required": true},
                {"name": "expected", "value":{
                    "type": "string",
                    "key": "Yes"
                }, "required": true}
            ],
            "operator": "check",
            "outputs": []
        },
        {
            "id": "H",
            "name": "End",
            "description": "End of the task",
            "prompt": "End of the task",
            "inputs": [],
            "operator": "end",
            "outputs": []
        }
    ],
    "steps": [
        {
            "source": "A",
            "target": "B",
            "fallback": "H"
        },
        {
            "source": "B",
            "target": "C",
            "fallback": "A"
        },
        {
            "source": "C",
            "target": "D"
        },
        {
            "source": "D",
            "target": "E"
        },
        {
            "source": "E",
            "target": "F"
        },
        {
          "source": "F",
          "target": "G"
        },
        {
            "source": "G",
            "target": "H",
            "fallback": "A"
        }
    ]
}